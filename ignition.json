{"ignition":{"config":{},"timeouts":{},"version":"2.1.0"},"networkd":{"units":[{"contents":"[Match]\nName=eth0\n\n[Network]\nDNS=8.8.4.4\nAddress=5.83.57.241/24\nGateway=5.83.57.1\n","name":"00-eth0.network"},{"contents":"[Match]\nName=eth1\n\n[Network]\nAddress=10.1.10.101/24\n","name":"00-eth1.network"}]},"passwd":{"users":[{"name":"core","passwordHash":"$1$sTHBGc9U$NjO6jfDX/kJnweYVRV0/i0","sshAuthorizedKeys":["ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDLKiyb51xIJJ9gchM+mZxQqgm3GaWKjv7V9zHuBMQfltex9gRD8tvhGzBqlY/ZkhsywRS0kAfDYHO+jKQPmMUk/NF/1XiiW5302caEmvR5erVhHUJAl/4ZCLrpdM/EyTlAP5AOn0eF4hQAiFEgIZYfrXakSeRNKvyxh9DiMYPqSGKj9XX8vY13tWS5hrVChF9YHqT4hanuLzSa/nHE6FmNa/TAYznaYn/jONWExxvJLwb3cpP48dA5DfKjop5zbAaX9YLax+/bWRuiqt6MP4Rx+olTX+YA8ICyOvZTVSWaUspv5I5/JydxP8RunwPryR2HtNkpp8soT1GM5nvuGi0x6XdO6PF+MmLs4kL/z0OorOSHOCSK3yauU3lfaGsY+hdTsHmC5Syb61ftnGNsJSmRHVGbod0QmUHPOUTYMy+0AjeS6PvNkqt4cLxHzWdi0lyqIXPVM1wk0VqDOCxquQuBJFEBTAMSK9nVJaLG6Cv4XHAJd5M4i76N2XZdLDIM3nNa7OwTKbbRSGuRV/5SZYGbk3rPmpz/aLZ88f5JDzLnc3UL8s6BIXr6Qcpi31wbf3QOTYBYKCFNzWiziGRkTku/fwgaqmg0PkTtuT+WMDacGajMz1ayVCdCnJlk1m1SgUdkfWrCD/w7tDW5EOeVYpaloXVJl5FgT3+2JzV1CZe2Ow== mikko.lampikoski","ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDTIpfalL8a57hW5/Y7TtEzFRiNvLpqarhGavU9XU0qrQ5dIAXdsD7KOxuBgphc6yeCxwm0sEDItYINp/KSWNys3wjkNBzCn5fZvnV4PcdT3mF0H5cL26olg+B5xl39T6iV/INaZ2pMSvAbHZpIkCj7BZ5uRUQ549yq7Urgi1UCnWpATvFjTalUs8d1RfR04btXtKjvLTdF/xX7AHWkUavyYWQf6+lub3BK5Tl4n3zfmj0tLL45WjL4dK0H8weA0SWGSkLmBh5cNl+6vqGL8tAYbogTkXWMhnVZE8eVMvPDt9oOt8vddpkQGeYeKDQt6gts9tdrg3QwEXXnAbraTPM7 mauno@doop.fi","ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAw3Xlx1q4HeTt254TkVN+T1EBQdFtLkQgTLD0uKS0ERxnwWszZQgVYdpJD6OSEwQBj+vnxMlWwEQdqpN+tcxS0JSKwRVqmGsnxFyOzp15roo+0DZ+2lDbEyGxMBmuTjEr2jB46biEp66a4Lf6RCRLHiIivRiE3znGR3VHPqqEHUr4hb+liBnEXCZtBiNV0RqcvHDcgJY6GYnQ8rdWNN+6vb3moD4ZDl36mpx0HB4Jqjr+hssyyRlrnyrPb+Bt/o/PQ06TBm5hXukzONMh6TvEmc9Nk9TeI/Vq0Ky7vQO9kh+ap4QJDDw/00CrBOsEtJfvjqwcdwxpWX0DicXHr2uh4w== eino@doop.fi","ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDhvvk+WJUipOGRkvClqGgQeFL8pf57sIS8nstRBpk5W5fjSvClUrYMdYXj/e+xTN+c+nW9tEPr65fp2mlRyIT/xT0L/68YflnMAdIxKWouapnlAZDcXMhjLn7kIq1M79bZW2+sI52gaqaPfu53UoCV/2BBFyTHiUjWa/pGmZZwE2TdiDUqlFCWscnXQShgkwZEuIlRc2DxxVEan67tUPP1TjjyXB5y59NUfcRE/7IhXM4exxhOdA8SELOaxiqzpdjDmtrMd8rk0DifybLP9IcCajsIY8khpc8S5BIVCKJ4Ro5Yst3y8LMWusOkkV38UaBDIGBIdMSsD+ItNkn3e0dV jari@doop.fi"]}]},"storage":{"directories":[{"filesystem":"root","group":{},"path":"/opt/bin","user":{},"mode":493},{"filesystem":"root","group":{},"path":"/etc/ceph","user":{},"mode":493}],"files":[{"filesystem":"root","group":{},"path":"/etc/hostname","user":{},"contents":{"source":"data:,coreos-1","verification":{}},"mode":420},{"filesystem":"root","group":{},"path":"/etc/ceph/ceph.conf","user":{},"contents":{"source":"data:,%5Bglobal%5D%0A%09%20auth%20client%20required%20%3D%20cephx%0A%09%20auth%20cluster%20required%20%3D%20cephx%0A%09%20auth%20service%20required%20%3D%20cephx%0A%09%20bluestore_block_db_size%20%3D%20120032591872%0A%09%20cluster%20network%20%3D%20172.20.0.0%2F24%0A%09%20fsid%20%3D%2048da1d9c-7ab9-4413-9a9c-5d9d158385fb%0A%09%20keyring%20%3D%20%2Fetc%2Fpve%2Fpriv%2F%24cluster.%24name.keyring%0A%09%20mon%20allow%20pool%20delete%20%3D%20true%0A%09%20osd%20journal%20size%20%3D%205120%0A%09%20osd%20pool%20default%20min%20size%20%3D%202%0A%09%20osd%20pool%20default%20size%20%3D%203%0A%09%20public%20network%20%3D%20172.20.0.0%2F24%0A%0A%5Bosd%5D%0A%09%20keyring%20%3D%20%2Fvar%2Flib%2Fceph%2Fosd%2Fceph-%24id%2Fkeyring%0A%0A%5Bmon.pve3%5D%0A%09%20host%20%3D%20pve3%0A%09%20mon%20addr%20%3D%20172.20.0.47%3A6789%0A%0A%5Bmon.pve1%5D%0A%09%20host%20%3D%20pve1%0A%09%20mon%20addr%20%3D%20172.20.0.45%3A6789%0A%0A%5Bmon.pve2%5D%0A%09%20host%20%3D%20pve2%0A%09%20mon%20addr%20%3D%20172.20.0.46%3A6789%0A%0A","verification":{}},"mode":420},{"filesystem":"root","group":{},"path":"/etc/ceph/ceph.client.admin.keyring","user":{},"contents":{"source":"data:,%5Bclient.admin%5D%0A%09key%20%3D%20AQCoZoVaFmUXHxAAsJi4g01McwNuJR1c2jqdUQ%3D%3D%0A%09auid%20%3D%200%0A%09caps%20mds%20%3D%20%22allow%22%0A%09caps%20mgr%20%3D%20%22allow%20*%22%0A%09caps%20mon%20%3D%20%22allow%20*%22%0A%09caps%20osd%20%3D%20%22allow%20*%22%0A","verification":{}},"mode":420},{"filesystem":"root","group":{"name":"core"},"path":"/home/core/.rexray/etc/config.yml","user":{"name":"core"},"contents":{"source":"data:,libstorage%3A%0A%20%20service%3A%20rbd%0A%20%20integration%3A%20%20%20%20%20%0A%20%20%20%20volume%3A%0A%20%20%20%20%20%20operations%3A%0A%20%20%20%20%20%20%20%20create%3A%0A%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20size%3A%2010G%0Arbd%3A%0A%20%20defaultPool%3A%20docker%0A","verification":{}},"mode":420},{"filesystem":"root","group":{},"path":"/etc/modules-load.d/rbd.conf","user":{},"contents":{"source":"data:,rbd","verification":{}},"mode":420},{"filesystem":"root","group":{},"path":"/opt/bin/ceph","user":{},"contents":{"source":"data:,%2Fusr%2Fbin%2Fdocker%20run%20--rm%20--privileged%3Dtrue%20-v%20%2Fetc%2Fceph%3A%2Fetc%2Fceph%20-v%20%2Fdev%3A%2Fdev%20ceph%2Fbase%20ceph%20%22%24%40%22","verification":{}},"mode":493},{"filesystem":"root","group":{},"path":"/opt/bin/ceph-base","user":{},"contents":{"source":"data:,%2Fusr%2Fbin%2Fdocker%20run%20--rm%20--privileged%3Dtrue%20-v%20%2Fetc%2Fceph%3A%2Fetc%2Fceph%20-v%20%2Fdev%3A%2Fdev%20ceph%2Fbase%20ceph-base%20%22%24%40%22","verification":{}},"mode":493},{"filesystem":"root","group":{},"path":"/opt/bin/ceph-common","user":{},"contents":{"source":"data:,%2Fusr%2Fbin%2Fdocker%20run%20--rm%20--privileged%3Dtrue%20-v%20%2Fetc%2Fceph%3A%2Fetc%2Fceph%20-v%20%2Fdev%3A%2Fdev%20ceph%2Fbase%20ceph-common%20%22%24%40%22","verification":{}},"mode":493},{"filesystem":"root","group":{},"path":"/opt/bin/ceph-conf","user":{},"contents":{"source":"data:,%2Fusr%2Fbin%2Fdocker%20run%20--rm%20--privileged%3Dtrue%20-v%20%2Fetc%2Fceph%3A%2Fetc%2Fceph%20-v%20%2Fdev%3A%2Fdev%20ceph%2Fbase%20ceph-conf%20%22%24%40%22","verification":{}},"mode":493},{"filesystem":"root","group":{},"path":"/opt/bin/rbd","user":{},"contents":{"source":"data:,%2Fusr%2Fbin%2Fdocker%20run%20--rm%20--privileged%3Dtrue%20-v%20%2Fetc%2Fceph%3A%2Fetc%2Fceph%20-v%20%2Fdev%3A%2Fdev%20ceph%2Frbd%20%22%24%40%22","verification":{}},"mode":493},{"filesystem":"root","group":{},"path":"/etc/docker/ca.pem","user":{},"contents":{"source":"data:,-----BEGIN%20CERTIFICATE-----%0AMIIB9TCCAZugAwIBAgIUQS1uURJIMpzOOoKFdH9olC32EeUwCgYIKoZIzj0EAwIw%0AVzELMAkGA1UEBhMCRkkxDjAMBgNVBAgTBVR1cmt1MQswCQYDVQQHEwJGSTENMAsG%0AA1UEChMEZG9vcDEcMBoGA1UEAxMTZG9vcCBkb2NrZXIgbmV0d29yazAeFw0xODAx%0AMzAwOTE5MDBaFw0yMzAxMjkwOTE5MDBaMFcxCzAJBgNVBAYTAkZJMQ4wDAYDVQQI%0AEwVUdXJrdTELMAkGA1UEBxMCRkkxDTALBgNVBAoTBGRvb3AxHDAaBgNVBAMTE2Rv%0Ab3AgZG9ja2VyIG5ldHdvcmswWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAATGaly6%0AkseU0FIovY7jLVDflVBYm5y2LfUE%2F3Y8mM%2Bdz7ugtPxzWQvYS3A%2FiM4avNkkIwYq%0ACwXipI5mwJiK8ce8o0UwQzAOBgNVHQ8BAf8EBAMCAQYwEgYDVR0TAQH%2FBAgwBgEB%0A%2FwIBAjAdBgNVHQ4EFgQUJJNCzu3EqfhD3bGf9UvuYNXYTUswCgYIKoZIzj0EAwID%0ASAAwRQIgOjyzrsIWLA6f67XRNlSYAvGjNgTzdxMoFSNZbDKd9goCIQDu5y5ynn0E%0A6vP0Gi36cfY1AZY%2Bye1h2VvhLOjb67qQ6w%3D%3D%0A-----END%20CERTIFICATE-----%0A","verification":{}},"mode":420},{"filesystem":"root","group":{},"path":"/etc/docker/server.pem","user":{},"contents":{"source":"data:,-----BEGIN%20CERTIFICATE-----%0AMIICPjCCAeOgAwIBAgIUKMFVqIryvdAim8mKXNIyeawTmRcwCgYIKoZIzj0EAwIw%0AVzELMAkGA1UEBhMCRkkxDjAMBgNVBAgTBVR1cmt1MQswCQYDVQQHEwJGSTENMAsG%0AA1UEChMEZG9vcDEcMBoGA1UEAxMTZG9vcCBkb2NrZXIgbmV0d29yazAeFw0xODAx%0AMzAwOTIyMDBaFw0yMzAxMjkwOTIyMDBaMD4xCzAJBgNVBAYTAkZJMRAwDgYDVQQI%0AEwdGaW5sYW5kMQswCQYDVQQHEwJGSTEQMA4GA1UEAxMHY29yZW9zMTBZMBMGByqG%0ASM49AgEGCCqGSM49AwEHA0IABKCLWguTNG135LTibyfueSQLikplWGOYwKXxZyrp%0AFGQFobL2eWTKNyNgwKcK5MM3Wnl%2FuzNrCs42pKd4c5cC5KmjgaUwgaIwDgYDVR0P%0AAQH%2FBAQDAgWgMBMGA1UdJQQMMAoGCCsGAQUFBwMBMAwGA1UdEwEB%2FwQCMAAwHQYD%0AVR0OBBYEFCkjqp7fdc1aPKhBI3q73IN7J056MB8GA1UdIwQYMBaAFCSTQs7txKn4%0AQ92xn%2FVL7mDV2E1LMC0GA1UdEQQmMCSCB2NvcmVvczGCDWNvcmVvczEubG9jYWyH%0ABAVTOfGHBAoBCmUwCgYIKoZIzj0EAwIDSQAwRgIhALtvkQMHBCxke1Tv7Fl4fI%2Fa%0AQKJh5Zw6Dq0UDIK2Ge4nAiEAm%2FEg%2FfCP3uV4YRqo4s%2FAzTBB3URg1bGdQKodRAnH%0AazY%3D%0A-----END%20CERTIFICATE-----%0A","verification":{}},"mode":420},{"filesystem":"root","group":{},"path":"/etc/docker/server-key.pem","user":{},"contents":{"source":"data:,-----BEGIN%20EC%20PRIVATE%20KEY-----%0AMHcCAQEEICdra0tPWyRNw5UDKGnlT6YMrKiAsOXlrjuMYEcX3zPdoAoGCCqGSM49%0AAwEHoUQDQgAEoItaC5M0bXfktOJvJ%2B55JAuKSmVYY5jApfFnKukUZAWhsvZ5ZMo3%0AI2DApwrkwzdaeX%2B7M2sKzjakp3hzlwLkqQ%3D%3D%0A-----END%20EC%20PRIVATE%20KEY-----%0A","verification":{}},"mode":420}]},"systemd":{"units":[{"dropins":[{"contents":"[Service]\nEnvironment=\"DOCKER_OPTS=--tlsverify --tlscacert=/etc/docker/ca.pem --tlscert=/etc/docker/server.pem --tlskey=/etc/docker/server-key.pem\"","name":"20-clct-docker.conf"}],"enable":true,"name":"docker.service"},{"dropins":[{"contents":"[Service]\nExecStart=\nExecStart=/usr/lib/coreos/etcd-wrapper $ETCD_OPTS \\\n  --name=\"my-etcd-1\" \\\n  --listen-peer-urls=\"http://0.0.0.0:2380\" \\\n  --listen-client-urls=\"http://0.0.0.0:2379\" \\\n  --initial-advertise-peer-urls=\"http://10.1.10.101:2380\" \\\n  --initial-cluster=\"my-etcd-1=http://10.1.10.101:2380,my-etcd-2=http://10.1.10.102:2380,my-etcd-3=http://10.1.10.103:2380,my-etcd-4=http://10.1.10.104:2380\" \\\n  --initial-cluster-state=\"existing\" \\\n  --initial-cluster-token=\"9fc4aa3a7169ae270c639c422439a71c\" \\\n  --advertise-client-urls=\"http://0.0.0.0:2379\"","name":"20-clct-etcd-member.conf"}],"enable":true,"name":"etcd-member.service"},{"enable":true,"name":"docker.service"},{"contents":"[Unit]\nDescription=Install docker-compose\nConditionPathExists=!/opt/bin/docker-compose\nAfter=network-online.target\nRequires=network-online.target\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nType=oneshot\nRemainAfterExit=yes\nExecStartPre=/usr/bin/mkdir -p /opt/bin/\nExecStart=/usr/bin/curl -o /opt/bin/docker-compose -sL \"https://github.com/docker/compose/releases/download/1.9.0/docker-compose-linux-x86_64\"\nExecStartPost=/usr/bin/chmod +x /opt/bin/docker-compose\n","enable":true,"name":"install-docker-compose.service"},{"contents":"[Unit]\nDescription=Install docker-plugin\nAfter=network-online.target\nRequires=network-online.target\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nType=oneshot\nRemainAfterExit=yes\nExecStart=/usr/bin/docker plugin install rexray/rbd:latest RBD_DEFAULTPOOL=\"docker\" RBD_CEPHARGS=\"--id admin\" --grant-all-permissions\nExecStartPost=/usr/bin/docker plugin enable rexray/rbd:latest\n","enable":true,"name":"install-rexray-docker-plugin.service"}]}}